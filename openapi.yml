openapi: 3.0.0
info:
  title: ASAP API
  version: 1.0.0
servers:
  - url: http://localhost:8080

paths:
  /api/oauth2/authorization/google:
    get:
      summary: Initiate Google OAuth2 login
      operationId: initiateGoogleOAuth2
      description: Redirects the user to Google's OAuth2 authorization endpoint to initiate the login process.
      responses:
        "302":
          description: Redirect to Google OAuth2 authorization endpoint

  /api/auth/login-link:
    post:
      summary: Create login link
      operationId: createLoginLink
      tags:
        - auth
      description: Generate a login link that will be sent to the user's email
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginLinkRequest"
      responses:
        "201":
          description: Login link created successfully
        "400":
          description: Invalid email format
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "429":
          description: Too many requests
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/auth/exchange:
    get:
      summary: Exchange login link token for JWT
      operationId: exchangeLoginLink
      tags:
        - auth
      description: Exchange a login link token for a JWT access token by clicking the link from email
      parameters:
        - name: organizationId
          in: query
          required: false
          schema:
            type: string
            format: uuid
          description: Optional organization ID if the login link is associated with a specific organization
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: The login link token received via email
        - name: twoFactorAuthCode
          in: query
          required: false
          schema:
            type: string
      responses:
        "200":
          description: Token exchange successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthMultiResponse"
        "400":
          description: Invalid or expired token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Token not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/auth/refresh:
    post:
      summary: Refresh JWT token
      operationId: refreshToken
      tags:
        - auth
      description: Refresh an existing JWT token to extend its lifetime
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RefreshTokenRequest"
      responses:
        "200":
          description: Token refreshed successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Invalid or expired token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/auth/login:
    post:
      summary: Login with email and password
      operationId: loginUser
      tags:
        - auth
      description: Authenticate user with email and password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginRequest"
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthMultiResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "429":
          description: Too many requests
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/auth/forgot-password:
    post:
      summary: Request password reset
      operationId: forgotPassword
      tags:
        - auth
      description: Send password reset link to user's email
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ForgotPasswordRequest"
      responses:
        "200":
          description: Password reset email sent
        "400":
          description: Invalid email format
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: User not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "429":
          description: Too many requests
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/auth/reset-password:
    post:
      summary: Reset password with token
      operationId: resetPassword
      tags:
        - auth
      description: Reset user password using reset token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ResetPasswordRequest"
      responses:
        "200":
          description: Password reset successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResetPasswordMultiResponse"
        "400":
          description: Invalid request or token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Token not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # ========= Users =========

  /api/users/me:
    patch:
      summary: Update current user
      operationId: updateCurrentUser
      tags:
        - users
      security:
        - bearerAuth: []
      description: Update current user's profile information
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateUserRequest"
      responses:
        "200":
          description: User updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CurrentUser"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    get:
      summary: Get current user
      operationId: getCurrentUser
      tags:
        - users
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Current user details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CurrentUser"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/users/me/password:
    put:
      summary: Update current user's password
      operationId: updateCurrentUserPassword
      tags:
        - users
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdatePasswordRequest"
      responses:
        "200":
          description: Password updated successfully
        "400":
          description: Invalid request or incorrect current password
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/users/me/auth-methods:
    get:
      summary: Get current user's authentication methods configuration
      operationId: getCurrentUserAuthMethods
      tags:
        - users
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Current user's authentication methods
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserAuthMethods"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      summary: Update current user's authentication methods
      operationId: updateCurrentUserAuthMethods
      tags:
        - users
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateAuthMethodsRequest"
      responses:
        "200":
          description: Updated authentication methods
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserAuthMethods"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/users/me/email-preferences:
    get:
      summary: Get current user's email preferences
      operationId: getCurrentUserEmailPreferences
      tags:
        - users
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Current user's email preferences
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserEmailPreferences"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      summary: Update current user's email preferences
      operationId: updateCurrentUserEmailPreferences
      tags:
        - users
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        "200":
          description: Updated email preferences
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserEmailPreferences"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/public/users/email-preferences:
    put:
      summary: Public update of user's email preferences using token
      operationId: updatePublicUserEmailPreferences
      tags:
        - users
      description: Update a user's email preferences using a token provided in emails. Token validity is signature-based; expiration is not enforced.
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Signed token used to authorize updates to the user's preferences
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        "200":
          description: Updated email preferences
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserEmailPreferences"
        "400":
          description: Invalid request or token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    get:
      summary: Public get of user's email preferences using token
      operationId: getPublicUserEmailPreferences
      tags:
        - users
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: Signed token used to authorize reading the user's preferences
      responses:
        "200":
          description: Current user's email preferences
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserEmailPreferences"
        "400":
          description: Invalid request or token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/admin/users:
    post:
      summary: Create user
      operationId: createAdminUser
      tags:
        - users
      security:
        - bearerAuth: []
      description: Create a new user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateUserRequest"
      responses:
        "200":
          description: User created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    get:
      summary: Find all users
      operationId: findAdminUsers
      tags:
        - users
      security:
        - bearerAuth: []
      description: Find all users
      parameters:
        - name: query
          in: query
          required: false
          schema:
            type: string
          description: Search query
        - name: organizationId
          in: query
          required: false
          schema:
            type: string
            format: uuid
          description: Organization ID filter
        - name: organizationName
          in: query
          required: false
          schema:
            type: string
          description: Organization name filter
        - name: page
          in: query
          required: false
          schema:
            type: integer
            format: int32
          description: Page number (starts from 0)
        - name: size
          in: query
          required: false
          schema:
            type: integer
            format: int32
          description: Number of items per page
        - name: sortBy
          in: query
          required: false
          schema:
            type: string
          description: Field to sort by
        - name: order
          in: query
          required: false
          schema:
            type: string
            enum: [asc, desc]
          description: Sort order
      responses:
        "200":
          description: Users response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedUserResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/admin/users/{id}:
    get:
      summary: Get user by ID
      operationId: getAdminUserById
      tags:
        - users
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: User ID
      responses:
        "200":
          description: User
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: User not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    patch:
      summary: Update user
      operationId: updateAdminUser
      tags:
        - users
      security:
        - bearerAuth: []
      description: Update a user
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: User ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateUserRequest"
      responses:
        "200":
          description: User updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: User not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    delete:
      summary: Delete user by ID
      operationId: deleteAdminUserById
      tags:
        - users
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: User ID
      responses:
        "200":
          description: User deleted successfully
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: User not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/users:
    post:
      summary: Create user
      operationId: createUser
      tags:
        - users
      security:
        - bearerAuth: []
      description: Create a new user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateUserRequest"
      responses:
        "200":
          description: User created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    get:
      summary: Find all users
      operationId: findUsers
      tags:
        - users
      security:
        - bearerAuth: []
      description: Find all users
      parameters:
        - name: query
          in: query
          required: false
          schema:
            type: string
          description: Search query
        - name: page
          in: query
          required: false
          schema:
            type: integer
            format: int32
          description: Page number (starts from 0)
        - name: size
          in: query
          required: false
          schema:
            type: integer
            format: int32
          description: Number of items per page
        - name: sortBy
          in: query
          required: false
          schema:
            type: string
          description: Field to sort by
        - name: order
          in: query
          required: false
          schema:
            type: string
            enum: [asc, desc]
          description: Sort order
      responses:
        "200":
          description: Users response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedUserResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/users/{id}:
    get:
      summary: Get user by ID
      operationId: getUserById
      tags:
        - users
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: User ID
      responses:
        "200":
          description: User
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: User not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    patch:
      summary: Update user
      operationId: updateUser
      tags:
        - users
      security:
        - bearerAuth: []
      description: Update a user
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: User ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateUserRequest"
      responses:
        "200":
          description: User updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: User not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    delete:
      summary: Delete user by ID
      operationId: deleteUserById
      tags:
        - users
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: User ID
      responses:
        "200":
          description: User deleted successfully
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: User not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # ========= Organizations =========

  /api/organizations/switch:
    post:
      summary: Switch organization
      operationId: switchOrganization
      tags:
        - organizations
      security:
        - bearerAuth: []
      description: Switch to another organization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SwitchOrganizationRequest"
      responses:
        "200":
          description: Switch successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "429":
          description: Too many requests
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/organizations/available:
    get:
      summary: Find all available organizations
      operationId: findAvailableOrganizations
      tags:
        - organizations
      security:
        - bearerAuth: []
      description: Find all available organizations for the current user
      parameters:
        - name: name
          in: query
          required: false
          schema:
            type: string
          description: Organization name filter
        - name: page
          in: query
          required: false
          schema:
            type: integer
            format: int32
          description: Page number (starts from 0)
        - name: size
          in: query
          required: false
          schema:
            type: integer
            format: int32
          description: Number of items per page
        - name: sortBy
          in: query
          required: false
          schema:
            type: string
          description: Field to sort by
        - name: order
          in: query
          required: false
          schema:
            type: string
            enum: [asc, desc]
          description: Sort order
      responses:
        "200":
          description: Organizations response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedAvailableOrganizationResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/admin/organizations:
    post:
      summary: Create organization
      operationId: createAdminOrganization
      tags:
        - organizations
      security:
        - bearerAuth: []
      description: Create a new organization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateOrganizationRequest"
      responses:
        "200":
          description: Organization created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Organization"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    get:
      summary: Find all organizations
      operationId: findAdminOrganizations
      tags:
        - organizations
      security:
        - bearerAuth: []
      description: Find all organizations
      parameters:
        - name: query
          in: query
          required: false
          schema:
            type: string
          description: Organization name
        - name: isActive
          in: query
          required: false
          schema:
            type: boolean
          description: Filter by active status
        - name: page
          in: query
          required: false
          schema:
            type: integer
            format: int32
          description: Page number (starts from 0)
        - name: size
          in: query
          required: false
          schema:
            type: integer
            format: int32
          description: Number of items per page
        - name: sortBy
          in: query
          required: false
          schema:
            type: string
          description: Field to sort by
        - name: order
          in: query
          required: false
          schema:
            type: string
            enum: [asc, desc]
          description: Sort order
      responses:
        "200":
          description: Organizations response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedOrganizationResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/admin/organizations/{id}:
    get:
      summary: Get organization by ID
      operationId: getAdminOrganizationById
      tags:
        - organizations
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Organization ID
      responses:
        "200":
          description: Organization
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Organization"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Organization not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    patch:
      summary: Update organization
      operationId: updateAdminOrganization
      tags:
        - organizations
      security:
        - bearerAuth: []
      description: Update an organization
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Organization ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateOrganizationRequest"
      responses:
        "200":
          description: Organization updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Organization"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Organization not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    delete:
      summary: Delete organization by ID
      operationId: deleteAdminOrganizationById
      tags:
        - organizations
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Organization ID
      responses:
        "200":
          description: Organization deleted successfully
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Organization not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # ========= Organization Members =========

  /api/organizations/{id}/members:
    get:
      summary: List organization members
      operationId: listOrganizationMembers
      tags:
        - organizations
      security:
        - bearerAuth: []
      description: List all members of an organization with pagination
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Organization ID
        - name: query
          in: query
          required: false
          schema:
            type: string
          description: Search by name or email
        - name: role
          in: query
          required: false
          schema:
            $ref: "#/components/schemas/UserRole"
          description: Filter by role
        - name: isActive
          in: query
          required: false
          schema:
            type: boolean
          description: Filter by active status
        - name: page
          in: query
          required: false
          schema:
            type: integer
            format: int32
          description: Page number (starts from 0)
        - name: size
          in: query
          required: false
          schema:
            type: integer
            format: int32
          description: Number of items per page
        - name: sortBy
          in: query
          required: false
          schema:
            type: string
          description: Field to sort by
        - name: order
          in: query
          required: false
          schema:
            type: string
            enum: [asc, desc]
          description: Sort order
      responses:
        "200":
          description: Organization members
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedOrganizationMemberResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Organization not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    post:
      summary: Add organization member
      operationId: addOrganizationMember
      tags:
        - organizations
      security:
        - bearerAuth: []
      description: Add a new member to an organization by email
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Organization ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AddOrganizationMemberRequest"
      responses:
        "201":
          description: Member added successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrganizationMember"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Organization not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "409":
          description: Member already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/organizations/{id}/members/{memberId}:
    patch:
      summary: Update organization member role
      operationId: updateOrganizationMember
      tags:
        - organizations
      security:
        - bearerAuth: []
      description: Update a member's role or active status within an organization
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Organization ID
        - name: memberId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Member ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateOrganizationMemberRequest"
      responses:
        "200":
          description: Member updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrganizationMember"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Organization or member not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    delete:
      summary: Remove organization member
      operationId: removeOrganizationMember
      tags:
        - organizations
      security:
        - bearerAuth: []
      description: Remove a member from an organization
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Organization ID
        - name: memberId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Member ID
      responses:
        "204":
          description: Member removed successfully
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Organization or member not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # ========= Phase 2: Tags =========

  /api/tag-groups:
    get:
      summary: List tag groups
      operationId: listTagGroups
      tags:
        - tag-groups
      responses:
        "200":
          description: List of tag groups
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/TagGroupResponse"
    post:
      summary: Create tag group
      operationId: createTagGroup
      tags:
        - tag-groups
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateTagGroupRequest"
      responses:
        "201":
          description: Tag group created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TagGroupResponse"

  /api/tag-groups/{id}:
    get:
      summary: Get tag group
      operationId: getTagGroup
      tags:
        - tag-groups
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Tag group details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TagGroupResponse"
    patch:
      summary: Update tag group
      operationId: updateTagGroup
      tags:
        - tag-groups
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateTagGroupRequest"
      responses:
        "200":
          description: Tag group updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TagGroupResponse"
    delete:
      summary: Delete tag group
      operationId: deleteTagGroup
      tags:
        - tag-groups
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Tag group deleted

  /api/tags:
    get:
      summary: List tags
      operationId: listTags
      tags:
        - tags
      parameters:
        - name: groupId
          in: query
          required: false
          schema:
            type: string
            format: uuid
        - name: search
          in: query
          required: false
          schema:
            type: string
      responses:
        "200":
          description: List of tags
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/TagResponse"
    post:
      summary: Create tag
      operationId: createTag
      tags:
        - tags
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateTagRequest"
      responses:
        "201":
          description: Tag created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TagResponse"

  /api/tags/{id}:
    get:
      summary: Get tag
      operationId: getTag
      tags:
        - tags
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Tag details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TagResponse"
    patch:
      summary: Update tag
      operationId: updateTag
      tags:
        - tags
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateTagRequest"
      responses:
        "200":
          description: Tag updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TagResponse"
    delete:
      summary: Delete tag
      operationId: deleteTag
      tags:
        - tags
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Tag deleted

  /api/tags/entity/{entityType}/{entityId}:
    get:
      summary: Get tags for entity
      operationId: getEntityTags
      tags:
        - tags
      parameters:
        - name: entityType
          in: path
          required: true
          schema:
            type: string
        - name: entityId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Tags for entity
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/TagResponse"
    post:
      summary: Apply tag to entity
      operationId: applyTagToEntity
      tags:
        - tags
      parameters:
        - name: entityType
          in: path
          required: true
          schema:
            type: string
        - name: entityId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ApplyTagRequest"
      responses:
        "201":
          description: Tag applied
    delete:
      summary: Remove tag from entity
      operationId: removeTagFromEntity
      tags:
        - tags
      parameters:
        - name: entityType
          in: path
          required: true
          schema:
            type: string
        - name: entityId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: tagId
          in: query
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Tag removed

  # ========= Phase 2: Lookup Lists =========

  /api/lookup-lists:
    get:
      summary: List lookup lists
      operationId: listLookupLists
      tags:
        - lookup-lists
      responses:
        "200":
          description: List of lookup lists
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/LookupListResponse"
    post:
      summary: Create lookup list
      operationId: createLookupList
      tags:
        - lookup-lists
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateLookupListRequest"
      responses:
        "201":
          description: Lookup list created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LookupListResponse"

  /api/lookup-lists/{id}:
    get:
      summary: Get lookup list with items
      operationId: getLookupList
      tags:
        - lookup-lists
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Lookup list details with items
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LookupListDetailResponse"
    patch:
      summary: Update lookup list
      operationId: updateLookupList
      tags:
        - lookup-lists
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateLookupListRequest"
      responses:
        "200":
          description: Lookup list updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LookupListResponse"
    delete:
      summary: Delete lookup list
      operationId: deleteLookupList
      tags:
        - lookup-lists
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Lookup list deleted

  /api/lookup-lists/{id}/items:
    get:
      summary: List lookup list items
      operationId: listLookupListItems
      tags:
        - lookup-lists
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: List of items
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/LookupListItemResponse"
    post:
      summary: Create lookup list item
      operationId: createLookupListItem
      tags:
        - lookup-lists
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateLookupListItemRequest"
      responses:
        "201":
          description: Item created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LookupListItemResponse"

  /api/lookup-lists/{id}/items/{itemId}:
    patch:
      summary: Update lookup list item
      operationId: updateLookupListItem
      tags:
        - lookup-lists
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: itemId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateLookupListItemRequest"
      responses:
        "200":
          description: Item updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LookupListItemResponse"
    delete:
      summary: Delete lookup list item
      operationId: deleteLookupListItem
      tags:
        - lookup-lists
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: itemId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Item deleted

  # ========= Phase 2: Custom Fields =========

  /api/custom-fields/{entityType}:
    get:
      summary: List custom field definitions
      operationId: listCustomFieldDefinitions
      tags:
        - custom-fields
      parameters:
        - name: entityType
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: List of custom field definitions
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/CustomFieldDefinitionResponse"
    post:
      summary: Create custom field definition
      operationId: createCustomFieldDefinition
      tags:
        - custom-fields
      parameters:
        - name: entityType
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateCustomFieldDefinitionRequest"
      responses:
        "201":
          description: Custom field definition created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CustomFieldDefinitionResponse"

  /api/custom-fields/{entityType}/{id}:
    patch:
      summary: Update custom field definition
      operationId: updateCustomFieldDefinition
      tags:
        - custom-fields
      parameters:
        - name: entityType
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateCustomFieldDefinitionRequest"
      responses:
        "200":
          description: Custom field definition updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CustomFieldDefinitionResponse"
    delete:
      summary: Delete custom field definition
      operationId: deleteCustomFieldDefinition
      tags:
        - custom-fields
      parameters:
        - name: entityType
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Custom field definition deleted

  # ========= Phase 2: Categories =========

  /api/categories:
    get:
      summary: List categories (tree)
      operationId: listCategories
      tags:
        - categories
      parameters:
        - name: type
          in: query
          required: false
          schema:
            type: string
      responses:
        "200":
          description: Category tree
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/CategoryResponse"
    post:
      summary: Create category
      operationId: createCategory
      tags:
        - categories
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateCategoryRequest"
      responses:
        "201":
          description: Category created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CategoryResponse"

  /api/categories/{id}:
    get:
      summary: Get category
      operationId: getCategory
      tags:
        - categories
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Category details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CategoryResponse"
    patch:
      summary: Update category
      operationId: updateCategory
      tags:
        - categories
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateCategoryRequest"
      responses:
        "200":
          description: Category updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CategoryResponse"
    delete:
      summary: Delete category
      operationId: deleteCategory
      tags:
        - categories
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Category deleted

  # ========= Phase 3: Clients =========

  /api/clients:
    get:
      summary: List clients
      operationId: listClients
      tags:
        - clients
      security:
        - bearerAuth: []
      description: List all clients with pagination and filtering
      parameters:
        - name: query
          in: query
          required: false
          schema:
            type: string
          description: Search query
        - name: type
          in: query
          required: false
          schema:
            type: string
          description: Filter by client type
        - name: isActive
          in: query
          required: false
          schema:
            type: boolean
          description: Filter by active status
        - name: page
          in: query
          required: false
          schema:
            type: integer
            format: int32
          description: Page number (starts from 0)
        - name: size
          in: query
          required: false
          schema:
            type: integer
            format: int32
          description: Number of items per page
        - name: sortBy
          in: query
          required: false
          schema:
            type: string
          description: Field to sort by
        - name: order
          in: query
          required: false
          schema:
            type: string
            enum: [asc, desc]
          description: Sort order
      responses:
        "200":
          description: Clients response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedClientResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    post:
      summary: Create client
      operationId: createClient
      tags:
        - clients
      security:
        - bearerAuth: []
      description: Create a new client
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateClientRequest"
      responses:
        "201":
          description: Client created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ClientResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/clients/{id}:
    get:
      summary: Get client by ID
      operationId: getClientById
      tags:
        - clients
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Client ID
      responses:
        "200":
          description: Client details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ClientResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Client not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    patch:
      summary: Update client
      operationId: updateClient
      tags:
        - clients
      security:
        - bearerAuth: []
      description: Update an existing client
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Client ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateClientRequest"
      responses:
        "200":
          description: Client updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ClientResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Client not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    delete:
      summary: Delete client
      operationId: deleteClient
      tags:
        - clients
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Client ID
      responses:
        "204":
          description: Client deleted successfully
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Client not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/clients/{id}/contacts:
    get:
      summary: List client contacts
      operationId: listClientContacts
      tags:
        - clients
      security:
        - bearerAuth: []
      description: List all contacts for a client
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Client ID
      responses:
        "200":
          description: Client contacts
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ClientContactResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Client not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    post:
      summary: Create client contact
      operationId: createClientContact
      tags:
        - clients
      security:
        - bearerAuth: []
      description: Add a new contact to a client
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Client ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateClientContactRequest"
      responses:
        "201":
          description: Contact created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ClientContactResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Client not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/clients/{id}/contacts/{contactId}:
    patch:
      summary: Update client contact
      operationId: updateClientContact
      tags:
        - clients
      security:
        - bearerAuth: []
      description: Update an existing client contact
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Client ID
        - name: contactId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Contact ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateClientContactRequest"
      responses:
        "200":
          description: Contact updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ClientContactResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Client or contact not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    delete:
      summary: Delete client contact
      operationId: deleteClientContact
      tags:
        - clients
      security:
        - bearerAuth: []
      description: Remove a contact from a client
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Client ID
        - name: contactId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Contact ID
      responses:
        "204":
          description: Contact deleted successfully
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Client or contact not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # ========= Phase 3: Vendors =========

  /api/vendors:
    get:
      summary: List vendors
      operationId: listVendors
      tags:
        - vendors
      security:
        - bearerAuth: []
      description: List all vendors with pagination and filtering
      parameters:
        - name: query
          in: query
          required: false
          schema:
            type: string
          description: Search query
        - name: type
          in: query
          required: false
          schema:
            type: string
          description: Filter by vendor type
        - name: isActive
          in: query
          required: false
          schema:
            type: boolean
          description: Filter by active status
        - name: page
          in: query
          required: false
          schema:
            type: integer
            format: int32
          description: Page number (starts from 0)
        - name: size
          in: query
          required: false
          schema:
            type: integer
            format: int32
          description: Number of items per page
        - name: sortBy
          in: query
          required: false
          schema:
            type: string
          description: Field to sort by
        - name: order
          in: query
          required: false
          schema:
            type: string
            enum: [asc, desc]
          description: Sort order
      responses:
        "200":
          description: Vendors response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedVendorResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    post:
      summary: Create vendor
      operationId: createVendor
      tags:
        - vendors
      security:
        - bearerAuth: []
      description: Create a new vendor
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateVendorRequest"
      responses:
        "201":
          description: Vendor created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VendorResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/vendors/{id}:
    get:
      summary: Get vendor by ID
      operationId: getVendorById
      tags:
        - vendors
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Vendor ID
      responses:
        "200":
          description: Vendor details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VendorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Vendor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    patch:
      summary: Update vendor
      operationId: updateVendor
      tags:
        - vendors
      security:
        - bearerAuth: []
      description: Update an existing vendor
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Vendor ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateVendorRequest"
      responses:
        "200":
          description: Vendor updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VendorResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Vendor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    delete:
      summary: Delete vendor
      operationId: deleteVendor
      tags:
        - vendors
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Vendor ID
      responses:
        "204":
          description: Vendor deleted successfully
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Vendor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/vendors/{id}/contacts:
    get:
      summary: List vendor contacts
      operationId: listVendorContacts
      tags:
        - vendors
      security:
        - bearerAuth: []
      description: List all contacts for a vendor
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Vendor ID
      responses:
        "200":
          description: Vendor contacts
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/VendorContactResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Vendor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    post:
      summary: Create vendor contact
      operationId: createVendorContact
      tags:
        - vendors
      security:
        - bearerAuth: []
      description: Add a new contact to a vendor
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Vendor ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateVendorContactRequest"
      responses:
        "201":
          description: Contact created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VendorContactResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Vendor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/vendors/{id}/contacts/{contactId}:
    patch:
      summary: Update vendor contact
      operationId: updateVendorContact
      tags:
        - vendors
      security:
        - bearerAuth: []
      description: Update an existing vendor contact
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Vendor ID
        - name: contactId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Contact ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateVendorContactRequest"
      responses:
        "200":
          description: Contact updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VendorContactResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Vendor or contact not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    delete:
      summary: Delete vendor contact
      operationId: deleteVendorContact
      tags:
        - vendors
      security:
        - bearerAuth: []
      description: Remove a contact from a vendor
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Vendor ID
        - name: contactId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Contact ID
      responses:
        "204":
          description: Contact deleted successfully
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Vendor or contact not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # ===== Products =====
  /api/products:
    get:
      summary: List products
      operationId: listProducts
      tags:
        - products
      security:
        - bearerAuth: []
      parameters:
        - name: query
          in: query
          schema:
            type: string
        - name: productType
          in: query
          schema:
            type: string
        - name: trackingType
          in: query
          schema:
            type: string
        - name: isActive
          in: query
          schema:
            type: boolean
        - name: page
          in: query
          schema:
            type: integer
        - name: size
          in: query
          schema:
            type: integer
        - name: sortBy
          in: query
          schema:
            type: string
        - name: order
          in: query
          schema:
            type: string
      responses:
        "200":
          description: Paginated list of products
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedProductResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Create product
      operationId: createProduct
      tags:
        - products
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateProductRequest"
      responses:
        "201":
          description: Product created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/products/{id}:
    get:
      summary: Get product by ID
      operationId: getProductById
      tags:
        - products
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Product details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Product not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    patch:
      summary: Update product
      operationId: updateProduct
      tags:
        - products
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateProductRequest"
      responses:
        "200":
          description: Product updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Product not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      summary: Delete product (soft)
      operationId: deleteProduct
      tags:
        - products
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Product deleted
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Product not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/products/{id}/children:
    get:
      summary: Get sub-products
      operationId: listProductChildren
      tags:
        - products
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Sub-products
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ProductResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/products/{id}/inventory:
    get:
      summary: Get serialized inventory items for product
      operationId: listProductInventory
      tags:
        - products
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Inventory items for this product
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/InventoryItemResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/products/{id}/stock:
    get:
      summary: Get stock levels for consumable product
      operationId: listProductStock
      tags:
        - products
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Stock levels for this product
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/StockLevelResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # ===== Inventory Items =====
  /api/inventory-items:
    get:
      summary: List inventory items
      operationId: listInventoryItems
      tags:
        - inventory
      security:
        - bearerAuth: []
      parameters:
        - name: query
          in: query
          schema:
            type: string
        - name: status
          in: query
          schema:
            type: string
        - name: productId
          in: query
          schema:
            type: string
            format: uuid
        - name: page
          in: query
          schema:
            type: integer
        - name: size
          in: query
          schema:
            type: integer
        - name: sortBy
          in: query
          schema:
            type: string
        - name: order
          in: query
          schema:
            type: string
      responses:
        "200":
          description: Paginated list of inventory items
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedInventoryItemResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Create inventory item
      operationId: createInventoryItem
      tags:
        - inventory
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateInventoryItemRequest"
      responses:
        "201":
          description: Inventory item created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InventoryItemResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/inventory-items/{id}:
    get:
      summary: Get inventory item by ID
      operationId: getInventoryItemById
      tags:
        - inventory
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Inventory item details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InventoryItemResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Item not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    patch:
      summary: Update inventory item
      operationId: updateInventoryItem
      tags:
        - inventory
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateInventoryItemRequest"
      responses:
        "200":
          description: Inventory item updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InventoryItemResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Item not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      summary: Delete inventory item
      operationId: deleteInventoryItem
      tags:
        - inventory
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Item deleted
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Item not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/inventory-items/{id}/check-out:
    post:
      summary: Check out inventory item
      operationId: checkOutInventoryItem
      tags:
        - inventory
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CheckOutRequest"
      responses:
        "200":
          description: Item checked out
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InventoryItemResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "409":
          description: Item not available for check-out
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/inventory-items/{id}/check-in:
    post:
      summary: Check in inventory item
      operationId: checkInInventoryItem
      tags:
        - inventory
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CheckInRequest"
      responses:
        "200":
          description: Item checked in
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InventoryItemResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/inventory-items/{id}/transfer:
    post:
      summary: Transfer inventory item to new location
      operationId: transferInventoryItem
      tags:
        - inventory
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TransferItemRequest"
      responses:
        "200":
          description: Item transferred
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InventoryItemResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # ===== Stock Levels =====
  /api/stock-levels/{id}/consume:
    post:
      summary: Consume stock
      operationId: consumeStock
      tags:
        - inventory
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ConsumeStockRequest"
      responses:
        "200":
          description: Stock consumed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StockLevelResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/stock-levels/{id}/restock:
    post:
      summary: Restock inventory
      operationId: restockLevel
      tags:
        - inventory
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RestockRequest"
      responses:
        "200":
          description: Stock restocked
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StockLevelResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/stock-levels/{id}/transfer:
    post:
      summary: Transfer stock between locations
      operationId: transferStock
      tags:
        - inventory
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TransferStockRequest"
      responses:
        "200":
          description: Stock transferred
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StockLevelResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # ===== Inventory Transactions =====
  /api/inventory-transactions:
    get:
      summary: List inventory transactions
      operationId: listInventoryTransactions
      tags:
        - inventory
      security:
        - bearerAuth: []
      parameters:
        - name: inventoryItemId
          in: query
          schema:
            type: string
            format: uuid
        - name: productId
          in: query
          schema:
            type: string
            format: uuid
        - name: projectId
          in: query
          schema:
            type: string
            format: uuid
        - name: page
          in: query
          schema:
            type: integer
        - name: size
          in: query
          schema:
            type: integer
      responses:
        "200":
          description: Paginated list of transactions
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedInventoryTransactionResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # ===== Resources =====
  /api/resources:
    get:
      summary: List resources
      operationId: listResources
      tags:
        - resources
      security:
        - bearerAuth: []
      parameters:
        - name: query
          in: query
          schema:
            type: string
        - name: type
          in: query
          schema:
            type: string
        - name: isActive
          in: query
          schema:
            type: boolean
        - name: page
          in: query
          schema:
            type: integer
        - name: size
          in: query
          schema:
            type: integer
        - name: sortBy
          in: query
          schema:
            type: string
        - name: order
          in: query
          schema:
            type: string
      responses:
        "200":
          description: Paginated list of resources
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedResourceResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Create resource
      operationId: createResource
      tags:
        - resources
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateResourceRequest"
      responses:
        "201":
          description: Resource created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourceResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/resources/{id}:
    get:
      summary: Get resource by ID
      operationId: getResourceById
      tags:
        - resources
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Resource details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourceResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    patch:
      summary: Update resource
      operationId: updateResource
      tags:
        - resources
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateResourceRequest"
      responses:
        "200":
          description: Resource updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourceResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      summary: Delete resource (soft)
      operationId: deleteResource
      tags:
        - resources
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Resource deleted
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/resources/{id}/availability:
    get:
      summary: List resource availability
      operationId: listResourceAvailability
      tags:
        - resources
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Availability blocks
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ResourceAvailabilityResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Create availability block
      operationId: createResourceAvailability
      tags:
        - resources
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateResourceAvailabilityRequest"
      responses:
        "201":
          description: Availability created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourceAvailabilityResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/resources/{id}/availability/{availId}:
    patch:
      summary: Update availability block
      operationId: updateResourceAvailability
      tags:
        - resources
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: availId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateResourceAvailabilityRequest"
      responses:
        "200":
          description: Availability updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourceAvailabilityResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      summary: Delete availability block
      operationId: deleteResourceAvailability
      tags:
        - resources
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: availId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Availability deleted
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/resources/{id}/payouts:
    get:
      summary: List payouts for resource
      operationId: listResourcePayouts
      tags:
        - resources
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Payouts for resource
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ResourcePayoutResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # ===== Resource Payouts =====
  /api/resource-payouts:
    get:
      summary: List all payouts
      operationId: listAllPayouts
      tags:
        - resource-payouts
      security:
        - bearerAuth: []
      parameters:
        - name: status
          in: query
          schema:
            type: string
        - name: resourceId
          in: query
          schema:
            type: string
            format: uuid
        - name: page
          in: query
          schema:
            type: integer
        - name: size
          in: query
          schema:
            type: integer
        - name: sortBy
          in: query
          schema:
            type: string
        - name: order
          in: query
          schema:
            type: string
      responses:
        "200":
          description: Paginated payouts
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedResourcePayoutResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Create payout
      operationId: createPayout
      tags:
        - resource-payouts
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateResourcePayoutRequest"
      responses:
        "201":
          description: Payout created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourcePayoutResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/resource-payouts/{id}:
    get:
      summary: Get payout by ID
      operationId: getPayoutById
      tags:
        - resource-payouts
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Payout details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourcePayoutResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    patch:
      summary: Update payout
      operationId: updatePayout
      tags:
        - resource-payouts
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateResourcePayoutRequest"
      responses:
        "200":
          description: Payout updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourcePayoutResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      summary: Delete payout
      operationId: deletePayout
      tags:
        - resource-payouts
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Payout deleted
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/resource-payouts/{id}/approve:
    post:
      summary: Approve payout
      operationId: approvePayout
      tags:
        - resource-payouts
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Payout approved
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourcePayoutResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/resource-payouts/{id}/mark-paid:
    post:
      summary: Mark payout as paid
      operationId: markPayoutPaid
      tags:
        - resource-payouts
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MarkPayoutPaidRequest"
      responses:
        "200":
          description: Payout marked as paid
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourcePayoutResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # ========= Project Endpoints =========

  /api/projects:
    get:
      summary: List projects
      operationId: listProjects
      tags:
        - projects
      parameters:
        - name: query
          in: query
          schema:
            type: string
        - name: status
          in: query
          schema:
            type: string
        - name: clientId
          in: query
          schema:
            type: string
            format: uuid
        - name: page
          in: query
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          schema:
            type: integer
            default: 25
        - name: sort
          in: query
          schema:
            type: string
      responses:
        "200":
          description: Paginated list of projects
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedProjectResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Create project
      operationId: createProject
      tags:
        - projects
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateProjectRequest"
      responses:
        "201":
          description: Project created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/projects/calendar:
    get:
      summary: Get project calendar entries
      operationId: getProjectCalendar
      tags:
        - projects
      parameters:
        - name: start
          in: query
          required: true
          schema:
            type: string
            format: date
        - name: end
          in: query
          required: true
          schema:
            type: string
            format: date
      responses:
        "200":
          description: Calendar entries
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ProjectCalendarEntry"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/projects/{id}:
    get:
      summary: Get project by ID
      operationId: getProjectById
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Project details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectDetailResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    patch:
      summary: Update project
      operationId: updateProject
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateProjectRequest"
      responses:
        "200":
          description: Project updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      summary: Delete project
      operationId: deleteProject
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Project deleted
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/projects/{id}/status:
    patch:
      summary: Transition project status
      operationId: updateProjectStatus
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ProjectStatusTransition"
      responses:
        "200":
          description: Status updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/projects/{id}/date-ranges:
    get:
      summary: List project date ranges
      operationId: listProjectDateRanges
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: List of date ranges
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ProjectDateRangeResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Create project date range
      operationId: createProjectDateRange
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateProjectDateRangeRequest"
      responses:
        "201":
          description: Date range created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectDateRangeResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/projects/{id}/date-ranges/{rangeId}:
    patch:
      summary: Update project date range
      operationId: updateProjectDateRange
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: rangeId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateProjectDateRangeRequest"
      responses:
        "200":
          description: Date range updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectDateRangeResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      summary: Delete project date range
      operationId: deleteProjectDateRange
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: rangeId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Date range deleted
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/projects/{id}/resources:
    get:
      summary: List project resources
      operationId: listProjectResources
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: List of assigned resources
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ProjectResourceResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Assign resource to project
      operationId: assignProjectResource
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateProjectResourceRequest"
      responses:
        "201":
          description: Resource assigned
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectResourceResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/projects/{id}/resources/{prId}:
    patch:
      summary: Update project resource assignment
      operationId: updateProjectResource
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: prId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateProjectResourceRequest"
      responses:
        "200":
          description: Resource assignment updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectResourceResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      summary: Remove resource from project
      operationId: removeProjectResource
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: prId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Resource removed
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/projects/{id}/resources/{prId}/confirm:
    post:
      summary: Confirm resource assignment
      operationId: confirmProjectResource
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: prId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Resource confirmed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectResourceResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/projects/{id}/products:
    get:
      summary: List project products
      operationId: listProjectProducts
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: List of assigned products
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ProjectProductResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Assign product to project
      operationId: assignProjectProduct
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateProjectProductRequest"
      responses:
        "201":
          description: Product assigned
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectProductResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/projects/{id}/products/{ppId}:
    patch:
      summary: Update project product assignment
      operationId: updateProjectProduct
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: ppId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateProjectProductRequest"
      responses:
        "200":
          description: Product assignment updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectProductResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      summary: Remove product from project
      operationId: removeProjectProduct
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: ppId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Product removed
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/projects/{id}/products/{ppId}/check-out:
    post:
      summary: Check out project product
      operationId: checkOutProjectProduct
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: ppId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Product checked out
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectProductResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/projects/{id}/products/{ppId}/return:
    post:
      summary: Return project product
      operationId: returnProjectProduct
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: ppId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Product returned
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectProductResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/projects/{id}/recalculate:
    post:
      summary: Recalculate project totals
      operationId: recalculateProjectTotals
      tags:
        - projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Totals recalculated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # ========= Inbound Request Endpoints =========

  /api/inbound-requests:
    get:
      summary: List inbound requests
      operationId: listInboundRequests
      tags:
        - inbound-requests
      parameters:
        - name: query
          in: query
          schema:
            type: string
        - name: status
          in: query
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          schema:
            type: integer
            default: 25
      responses:
        "200":
          description: Paginated list
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedInboundRequestResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Create inbound request
      operationId: createInboundRequest
      tags:
        - inbound-requests
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateInboundRequestRequest"
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InboundRequestResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/inbound-requests/{id}:
    get:
      summary: Get inbound request
      operationId: getInboundRequestById
      tags:
        - inbound-requests
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Request detail
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InboundRequestResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    patch:
      summary: Update inbound request
      operationId: updateInboundRequest
      tags:
        - inbound-requests
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateInboundRequestRequest"
      responses:
        "200":
          description: Updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InboundRequestResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      summary: Delete inbound request
      operationId: deleteInboundRequest
      tags:
        - inbound-requests
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Deleted
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/inbound-requests/{id}/review:
    post:
      summary: Review inbound request
      operationId: reviewInboundRequest
      tags:
        - inbound-requests
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ReviewInboundRequestRequest"
      responses:
        "200":
          description: Reviewed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InboundRequestResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/inbound-requests/{id}/convert:
    post:
      summary: Convert inbound request to project
      operationId: convertInboundRequest
      tags:
        - inbound-requests
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Converted to project
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InboundRequestResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # ========= Quote Endpoints =========

  /api/quotes:
    get:
      summary: List quotes
      operationId: listQuotes
      tags:
        - quotes
      parameters:
        - name: query
          in: query
          schema:
            type: string
        - name: status
          in: query
          schema:
            type: string
        - name: clientId
          in: query
          schema:
            type: string
            format: uuid
        - name: projectId
          in: query
          schema:
            type: string
            format: uuid
        - name: page
          in: query
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          schema:
            type: integer
            default: 25
      responses:
        "200":
          description: Paginated list of quotes
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedQuoteResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Create quote
      operationId: createQuote
      tags:
        - quotes
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateQuoteRequest"
      responses:
        "201":
          description: Quote created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuoteResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/quotes/{id}:
    get:
      summary: Get quote with line items
      operationId: getQuoteById
      tags:
        - quotes
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Quote detail with line items
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuoteDetailResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    patch:
      summary: Update quote
      operationId: updateQuote
      tags:
        - quotes
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateQuoteRequest"
      responses:
        "200":
          description: Quote updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuoteResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      summary: Delete quote
      operationId: deleteQuote
      tags:
        - quotes
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Quote deleted
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/quotes/{id}/line-items:
    get:
      summary: List quote line items
      operationId: listQuoteLineItems
      tags:
        - quotes
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Line items
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/QuoteLineItemResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Add quote line item
      operationId: createQuoteLineItem
      tags:
        - quotes
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateQuoteLineItemRequest"
      responses:
        "201":
          description: Line item created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuoteLineItemResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/quotes/{id}/line-items/{lineId}:
    patch:
      summary: Update quote line item
      operationId: updateQuoteLineItem
      tags:
        - quotes
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: lineId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateQuoteLineItemRequest"
      responses:
        "200":
          description: Line item updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuoteLineItemResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      summary: Delete quote line item
      operationId: deleteQuoteLineItem
      tags:
        - quotes
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: lineId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Line item deleted
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/quotes/{id}/send:
    post:
      summary: Send quote to client
      operationId: sendQuote
      tags:
        - quotes
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Quote sent
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuoteResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/quotes/{id}/new-version:
    post:
      summary: Create new version of quote
      operationId: createNewQuoteVersion
      tags:
        - quotes
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "201":
          description: New version created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuoteResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/quotes/{id}/recalculate:
    post:
      summary: Recalculate quote totals
      operationId: recalculateQuote
      tags:
        - quotes
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Totals recalculated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuoteResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/quotes/{id}/approve:
    post:
      summary: Approve quote (client action)
      operationId: approveQuote
      tags:
        - quotes
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/QuoteApprovalRequest"
      responses:
        "200":
          description: Quote approved
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuoteResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    # ========= Auth Schemas =========

    LoginLinkRequest:
      type: object
      properties:
        email:
          type: string
          format: email
          description: Email address of the user to send the login link to
      required:
        - email

    RefreshTokenRequest:
      type: object
      properties:
        refreshToken:
          type: string
          description: JWT refresh token
      required:
        - refreshToken

    LoginRequest:
      type: object
      properties:
        organizationId:
          type: string
          format: uuid
          description: Organization ID to login to
        email:
          type: string
          format: email
          description: User's email address
        password:
          type: string
          description: User's password
        twoFactorAuthCode:
          type: string
      required:
        - email
        - password

    ForgotPasswordRequest:
      type: object
      properties:
        email:
          type: string
          format: email
          description: User's email address
      required:
        - email

    AuthMultiResponse:
      oneOf:
        - $ref: "#/components/schemas/AuthResponse"
        - $ref: "#/components/schemas/AvailableOrganizationsResponse"

    ResetPasswordRequest:
      type: object
      properties:
        token:
          type: string
          description: Password reset token
        newPassword:
          type: string
          minLength: 8
          description: New password (minimum 8 characters)
      required:
        - token
        - newPassword

    AuthResponse:
      type: object
      properties:
        accessToken:
          type: string
          description: JWT access token
        refreshToken:
          type: string
          description: JWT refresh token
        twoFactorAuthToken:
          type: string
          description: Temporary token for 2FA verification (if applicable)
        twoFactorAuthRequired:
          type: boolean

    ResetPasswordResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Whether the password reset was successful

    ResetPasswordMultiResponse:
      oneOf:
        - $ref: "#/components/schemas/AvailableOrganizationsResponse"
        - $ref: "#/components/schemas/ResetPasswordResponse"

    TwoFactorSetupResponse:
      type: object
      properties:
        secret:
          type: string
          description: TOTP secret key
        qrCode:
          type: string
          description: Base64 encoded QR code image
        uri:
          type: string
          description: TOTP URI for manual setup

    TwoFactorEnableRequest:
      type: object
      properties:
        code:
          type: string
          description: TOTP code to verify setup
      required:
        - code

    TwoFactorDisableRequest:
      type: object
      properties:
        code:
          type: string
          description: TOTP code to verify disable request
      required:
        - code

    TwoFactorStatusResponse:
      type: object
      properties:
        enabled:
          type: boolean
          description: Whether 2FA is enabled

    TwoFactorVerifyRequest:
      type: object
      properties:
        organizationId:
          type: string
          format: uuid
        token:
          type: string
          description: Temporary token or OTP from initial auth
        code:
          type: string
          description: TOTP code to verify (optional for OTP flow)
      required:
        - token

    # ========= Common Schemas =========

    Error:
      type: object
      properties:
        code:
          type: integer
          description: Error code
        message:
          type: string
          description: Human-readable error message
        timestamp:
          type: string
          format: date-time
          description: Timestamp when the error occurred
        path:
          type: string
          description: Request path that caused the error

    Timestamp:
      type: string
      format: date-time
      description: Timestamp in ISO 8601 format

    PaginatedResponse:
      type: object
      properties:
        page:
          type: integer
          description: Current page number (zero-based)
        size:
          type: integer
          description: Number of items per page
        totalElements:
          type: integer
          format: int64
          description: Total number of elements
        totalPages:
          type: integer
          description: Total number of pages

    # ========= User Schemas =========

    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier for the user
        email:
          type: string
          description: Email address of the user
        firstName:
          type: string
          description: User's first name
        lastName:
          type: string
          description: User's last name
        phone:
          type: string
          description: User's phone number
        avatarUrl:
          type: string
          format: uri
          description: URL to the user's avatar image
        roles:
          type: array
          items:
            $ref: "#/components/schemas/UserRole"
          description: User's roles
        isActive:
          type: boolean
          description: Whether the user is active
        twoFactorAuthEnabled:
          type: boolean
          description: Whether two-factor authentication is enabled
        createdAt:
          $ref: "#/components/schemas/Timestamp"
        updatedAt:
          $ref: "#/components/schemas/Timestamp"

    CurrentUser:
      allOf:
        - $ref: "#/components/schemas/User"
        - type: object
          properties:
            organizationId:
              type: string
              format: uuid
              description: The current organization ID the user is operating in

    UserRole:
      type: string
      enum:
        - PLATFORM_ADMIN
        - OWNER
        - ADMIN
        - MEMBER
        - VIEWER
        - ACCOUNTANT

    CreateUserRequest:
      type: object
      required:
        - email
        - firstName
        - roles
      properties:
        organizationId:
          type: string
          format: uuid
          description: Organization ID
        email:
          type: string
          format: email
          description: Email address of the user
        firstName:
          type: string
          description: User's first name
        lastName:
          type: string
          description: User's last name
        phone:
          type: string
          description: User's phone number
        roles:
          type: array
          items:
            $ref: "#/components/schemas/UserRole"
        sendEmail:
          type: boolean
          description: Whether to send an invitation email to the user

    UpdateUserRequest:
      type: object
      properties:
        firstName:
          type: string
          nullable: true
          description: User's first name
        lastName:
          type: string
          nullable: true
          description: User's last name
        phone:
          type: string
          nullable: true
          description: User's phone number
        avatarUrl:
          type: string
          format: uri
          nullable: true
          description: URL to the user's avatar image
        roles:
          nullable: true
          type: array
          items:
            $ref: "#/components/schemas/UserRole"
          description: User's roles
      description: Request to update user profile information

    UpdatePasswordRequest:
      type: object
      properties:
        oldPassword:
          type: string
          description: Current password
        newPassword:
          type: string
          description: New password
        twoFactorAuthCode:
          type: string
          description: 2FA code (if applicable)

    UserAuthMethods:
      type: object
      properties:
        passwordEnabled:
          type: boolean
          description: Whether password authentication is enabled
        loginLinkEnabled:
          type: boolean
          description: Whether login link authentication is enabled
        googleEnabled:
          type: boolean
          description: Whether Google OAuth authentication is enabled

    UpdateAuthMethodsRequest:
      type: object
      properties:
        passwordEnabled:
          type: boolean
          description: Enable or disable password authentication
        loginLinkEnabled:
          type: boolean
          description: Enable or disable login link authentication
        googleEnabled:
          type: boolean
          description: Enable or disable Google OAuth authentication
        twoFactorAuthCode:
          type: string
          description: 2FA code (required if 2FA is active)

    UserEmailPreferences:
      type: object
      properties:
        email:
          type: string
          format: email
          description: User's email address
        preferences:
          type: object
          additionalProperties: true

    PaginatedUserResponse:
      allOf:
        - $ref: "#/components/schemas/PaginatedResponse"
        - type: object
          properties:
            items:
              type: array
              items:
                $ref: "#/components/schemas/User"
              description: List of users

    # ========= Organization Schemas =========

    Organization:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Organization ID
        name:
          type: string
          description: Organization name
        slug:
          type: string
          description: URL-friendly identifier for the organization
        isActive:
          type: boolean
          description: Whether the organization is active
        settings:
          type: object
          additionalProperties: true
          description: Organization-level settings
        billingInfo:
          type: object
          additionalProperties: true
          description: Organization billing information
        createdAt:
          $ref: "#/components/schemas/Timestamp"
        updatedAt:
          $ref: "#/components/schemas/Timestamp"

    AvailableOrganizationResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Organization ID
        name:
          type: string
          description: Organization name

    AvailableOrganizationsResponse:
      type: object
      properties:
        organizations:
          type: array
          items:
            $ref: "#/components/schemas/AvailableOrganizationResponse"
          description: List of available organizations for the user

    SwitchOrganizationRequest:
      type: object
      properties:
        organizationId:
          type: string
          format: uuid
          description: Organization ID to switch to

    CreateOrganizationRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          description: Organization name
        slug:
          type: string
          description: URL-friendly identifier for the organization

    UpdateOrganizationRequest:
      type: object
      properties:
        name:
          nullable: true
          type: string
          description: Organization name
        slug:
          nullable: true
          type: string
          description: URL-friendly identifier for the organization
        isActive:
          nullable: true
          type: boolean
          description: Whether the organization is active
        settings:
          nullable: true
          type: object
          additionalProperties: true
          description: Organization-level settings
        billingInfo:
          nullable: true
          type: object
          additionalProperties: true
          description: Organization billing information

    PaginatedOrganizationResponse:
      allOf:
        - $ref: "#/components/schemas/PaginatedResponse"
        - type: object
          properties:
            items:
              type: array
              items:
                $ref: "#/components/schemas/Organization"
              description: List of organizations

    PaginatedAvailableOrganizationResponse:
      allOf:
        - $ref: "#/components/schemas/PaginatedResponse"
        - type: object
          properties:
            items:
              type: array
              items:
                $ref: "#/components/schemas/AvailableOrganizationResponse"
              description: List of available organizations for the user

    # ========= Organization Member Schemas =========

    OrganizationMember:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Membership ID
        organizationId:
          type: string
          format: uuid
          description: Organization ID
        userId:
          type: string
          format: uuid
          description: User ID
        userEmail:
          type: string
          description: User's email address
        userFirstName:
          type: string
          description: User's first name
        userLastName:
          type: string
          description: User's last name
        role:
          $ref: "#/components/schemas/UserRole"
        isActive:
          type: boolean
          description: Whether the membership is active
        joinedAt:
          type: string
          format: date-time
          description: Timestamp when the member joined
        invitedAt:
          type: string
          format: date-time
          description: Timestamp when the member was invited

    AddOrganizationMemberRequest:
      type: object
      required:
        - email
        - role
      properties:
        email:
          type: string
          format: email
          description: Email address of the user to add
        role:
          $ref: "#/components/schemas/UserRole"

    UpdateOrganizationMemberRequest:
      type: object
      properties:
        role:
          $ref: "#/components/schemas/UserRole"
        isActive:
          type: boolean
          description: Whether the membership is active

    PaginatedOrganizationMemberResponse:
      allOf:
        - $ref: "#/components/schemas/PaginatedResponse"
        - type: object
          properties:
            items:
              type: array
              items:
                $ref: "#/components/schemas/OrganizationMember"
              description: List of organization members

    # ========= Phase 2: Tag Schemas =========

    TagGroupResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        color:
          type: string
        description:
          type: string
        createdAt:
          $ref: "#/components/schemas/Timestamp"

    CreateTagGroupRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
        color:
          type: string
        description:
          type: string

    UpdateTagGroupRequest:
      type: object
      properties:
        name:
          type: string
          nullable: true
        color:
          type: string
          nullable: true
        description:
          type: string
          nullable: true

    TagResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        color:
          type: string
        tagGroupId:
          type: string
          format: uuid
        tagGroupName:
          type: string
        createdAt:
          $ref: "#/components/schemas/Timestamp"

    CreateTagRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
        color:
          type: string
        tagGroupId:
          type: string
          format: uuid

    UpdateTagRequest:
      type: object
      properties:
        name:
          type: string
          nullable: true
        color:
          type: string
          nullable: true
        tagGroupId:
          type: string
          format: uuid
          nullable: true

    ApplyTagRequest:
      type: object
      required:
        - tagId
      properties:
        tagId:
          type: string
          format: uuid

    # ========= Phase 2: Lookup List Schemas =========

    LookupListResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        slug:
          type: string
        description:
          type: string
        isSystem:
          type: boolean
        isActive:
          type: boolean
        createdAt:
          $ref: "#/components/schemas/Timestamp"

    LookupListDetailResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        slug:
          type: string
        description:
          type: string
        isSystem:
          type: boolean
        isActive:
          type: boolean
        items:
          type: array
          items:
            $ref: "#/components/schemas/LookupListItemResponse"
        createdAt:
          $ref: "#/components/schemas/Timestamp"

    CreateLookupListRequest:
      type: object
      required:
        - name
        - slug
      properties:
        name:
          type: string
        slug:
          type: string
        description:
          type: string

    UpdateLookupListRequest:
      type: object
      properties:
        name:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        isActive:
          type: boolean
          nullable: true

    LookupListItemResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        value:
          type: string
        label:
          type: string
        color:
          type: string
        icon:
          type: string
        metadata:
          type: object
          additionalProperties: true
        parentId:
          type: string
          format: uuid
        isActive:
          type: boolean
        displayOrder:
          type: integer

    CreateLookupListItemRequest:
      type: object
      required:
        - value
        - label
      properties:
        value:
          type: string
        label:
          type: string
        color:
          type: string
        icon:
          type: string
        metadata:
          type: object
          additionalProperties: true
        parentId:
          type: string
          format: uuid
        displayOrder:
          type: integer

    UpdateLookupListItemRequest:
      type: object
      properties:
        label:
          type: string
          nullable: true
        color:
          type: string
          nullable: true
        icon:
          type: string
          nullable: true
        metadata:
          type: object
          additionalProperties: true
          nullable: true
        isActive:
          type: boolean
          nullable: true
        displayOrder:
          type: integer
          nullable: true

    # ========= Phase 2: Custom Field Schemas =========

    CustomFieldDefinitionResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        entityType:
          type: string
        fieldKey:
          type: string
        fieldLabel:
          type: string
        fieldType:
          type: string
        options:
          type: array
          items:
            type: object
        lookupListId:
          type: string
          format: uuid
        collectionSchema:
          type: array
          items:
            type: object
        minEntries:
          type: integer
        maxEntries:
          type: integer
        isRequired:
          type: boolean
        defaultValue:
          type: string
        isFilterable:
          type: boolean
        displayOrder:
          type: integer
        section:
          type: string
        showOnForm:
          type: boolean
        showOnCard:
          type: boolean
        dependsOnFieldId:
          type: string
          format: uuid
        dependsOnValue:
          type: string
        createdAt:
          $ref: "#/components/schemas/Timestamp"

    CreateCustomFieldDefinitionRequest:
      type: object
      required:
        - fieldKey
        - fieldLabel
        - fieldType
      properties:
        fieldKey:
          type: string
        fieldLabel:
          type: string
        fieldType:
          type: string
        options:
          type: array
          items:
            type: object
        lookupListId:
          type: string
          format: uuid
        collectionSchema:
          type: array
          items:
            type: object
        minEntries:
          type: integer
        maxEntries:
          type: integer
        isRequired:
          type: boolean
        defaultValue:
          type: string
        isFilterable:
          type: boolean
        displayOrder:
          type: integer
        section:
          type: string
        showOnForm:
          type: boolean
        showOnCard:
          type: boolean
        dependsOnFieldId:
          type: string
          format: uuid
        dependsOnValue:
          type: string

    UpdateCustomFieldDefinitionRequest:
      type: object
      properties:
        fieldLabel:
          type: string
          nullable: true
        options:
          type: array
          items:
            type: object
          nullable: true
        isRequired:
          type: boolean
          nullable: true
        defaultValue:
          type: string
          nullable: true
        isFilterable:
          type: boolean
          nullable: true
        displayOrder:
          type: integer
          nullable: true
        section:
          type: string
          nullable: true
        showOnForm:
          type: boolean
          nullable: true
        showOnCard:
          type: boolean
          nullable: true

    # ========= Phase 2: Category Schemas =========

    CategoryResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        code:
          type: string
        type:
          type: string
        description:
          type: string
        parentId:
          type: string
          format: uuid
        isActive:
          type: boolean
        displayOrder:
          type: integer
        children:
          type: array
          items:
            $ref: "#/components/schemas/CategoryResponse"
        createdAt:
          $ref: "#/components/schemas/Timestamp"

    CreateCategoryRequest:
      type: object
      required:
        - name
        - type
      properties:
        name:
          type: string
        code:
          type: string
        type:
          type: string
        description:
          type: string
        parentId:
          type: string
          format: uuid
        displayOrder:
          type: integer

    UpdateCategoryRequest:
      type: object
      properties:
        name:
          type: string
          nullable: true
        code:
          type: string
          nullable: true
        type:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        parentId:
          type: string
          format: uuid
          nullable: true
        isActive:
          type: boolean
          nullable: true
        displayOrder:
          type: integer
          nullable: true

    # ========= Phase 3: Client Schemas =========

    ClientResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        type:
          type: string
        email:
          type: string
        phone:
          type: string
        website:
          type: string
        billingAddress:
          type: object
          additionalProperties: true
        shippingAddress:
          type: object
          additionalProperties: true
        notes:
          type: string
        externalAccountingId:
          type: string
        pricingTier:
          type: string
        customFields:
          type: object
          additionalProperties: true
        isActive:
          type: boolean
        createdAt:
          $ref: "#/components/schemas/Timestamp"
        updatedAt:
          $ref: "#/components/schemas/Timestamp"

    CreateClientRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
        type:
          type: string
        email:
          type: string
        phone:
          type: string
        website:
          type: string
        billingAddress:
          type: object
          additionalProperties: true
        shippingAddress:
          type: object
          additionalProperties: true
        notes:
          type: string
        pricingTier:
          type: string
        customFields:
          type: object
          additionalProperties: true

    UpdateClientRequest:
      type: object
      properties:
        name:
          type: string
          nullable: true
        type:
          type: string
          nullable: true
        email:
          type: string
          nullable: true
        phone:
          type: string
          nullable: true
        website:
          type: string
          nullable: true
        notes:
          type: string
          nullable: true
        isActive:
          type: boolean
          nullable: true
        pricingTier:
          type: string
          nullable: true

    PaginatedClientResponse:
      allOf:
        - $ref: "#/components/schemas/PaginatedResponse"
        - type: object
          properties:
            items:
              type: array
              items:
                $ref: "#/components/schemas/ClientResponse"
              description: List of clients

    ClientContactResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        clientId:
          type: string
          format: uuid
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
        phone:
          type: string
        role:
          type: string
        isPrimary:
          type: boolean
        notes:
          type: string
        createdAt:
          $ref: "#/components/schemas/Timestamp"

    CreateClientContactRequest:
      type: object
      required:
        - firstName
      properties:
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
        phone:
          type: string
        role:
          type: string
        isPrimary:
          type: boolean

    UpdateClientContactRequest:
      type: object
      properties:
        firstName:
          type: string
          nullable: true
        lastName:
          type: string
          nullable: true
        email:
          type: string
          nullable: true
        phone:
          type: string
          nullable: true
        role:
          type: string
          nullable: true
        isPrimary:
          type: boolean
          nullable: true

    # ========= Phase 3: Vendor Schemas =========

    VendorResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        type:
          type: string
        email:
          type: string
        phone:
          type: string
        website:
          type: string
        billingAddress:
          type: object
          additionalProperties: true
        notes:
          type: string
        externalAccountingId:
          type: string
        paymentInfo:
          type: object
          additionalProperties: true
        customFields:
          type: object
          additionalProperties: true
        isActive:
          type: boolean
        createdAt:
          $ref: "#/components/schemas/Timestamp"
        updatedAt:
          $ref: "#/components/schemas/Timestamp"

    CreateVendorRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
        type:
          type: string
        email:
          type: string
        phone:
          type: string
        website:
          type: string
        billingAddress:
          type: object
          additionalProperties: true
        notes:
          type: string
        paymentInfo:
          type: object
          additionalProperties: true
        customFields:
          type: object
          additionalProperties: true

    UpdateVendorRequest:
      type: object
      properties:
        name:
          type: string
          nullable: true
        type:
          type: string
          nullable: true
        email:
          type: string
          nullable: true
        phone:
          type: string
          nullable: true
        website:
          type: string
          nullable: true
        notes:
          type: string
          nullable: true
        isActive:
          type: boolean
          nullable: true

    PaginatedVendorResponse:
      allOf:
        - $ref: "#/components/schemas/PaginatedResponse"
        - type: object
          properties:
            items:
              type: array
              items:
                $ref: "#/components/schemas/VendorResponse"
              description: List of vendors

    VendorContactResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        vendorId:
          type: string
          format: uuid
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
        phone:
          type: string
        role:
          type: string
        isPrimary:
          type: boolean
        notes:
          type: string
        createdAt:
          $ref: "#/components/schemas/Timestamp"

    CreateVendorContactRequest:
      type: object
      required:
        - firstName
      properties:
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
        phone:
          type: string
        role:
          type: string
        isPrimary:
          type: boolean

    UpdateVendorContactRequest:
      type: object
      properties:
        firstName:
          type: string
          nullable: true
        lastName:
          type: string
          nullable: true
        email:
          type: string
          nullable: true
        phone:
          type: string
          nullable: true
        role:
          type: string
          nullable: true
        isPrimary:
          type: boolean
          nullable: true

    # ========= Product & Inventory Schemas =========
    ProductResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        parentId:
          type: string
          format: uuid
        categoryId:
          type: string
          format: uuid
        name:
          type: string
        sku:
          type: string
        productType:
          type: string
        description:
          type: string
        unitPrice:
          type: number
        priceUnit:
          type: string
        costPrice:
          type: number
        trackingType:
          type: string
        unitOfMeasure:
          type: string
        reorderPoint:
          type: integer
        isRentable:
          type: boolean
        isSellable:
          type: boolean
        purchasePrice:
          type: number
        purchaseDate:
          type: string
          format: date
        depreciationMethod:
          type: string
        usefulLifeMonths:
          type: integer
        customFields:
          type: object
          additionalProperties: true
        isActive:
          type: boolean
        displayOrder:
          type: integer
        createdAt:
          $ref: "#/components/schemas/Timestamp"
        updatedAt:
          $ref: "#/components/schemas/Timestamp"

    PaginatedProductResponse:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/ProductResponse"
        page:
          type: integer
        size:
          type: integer
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer

    CreateProductRequest:
      type: object
      required:
        - name
      properties:
        parentId:
          type: string
          format: uuid
        categoryId:
          type: string
          format: uuid
        name:
          type: string
        sku:
          type: string
        productType:
          type: string
        description:
          type: string
        unitPrice:
          type: number
        priceUnit:
          type: string
        costPrice:
          type: number
        trackingType:
          type: string
        unitOfMeasure:
          type: string
        reorderPoint:
          type: integer
        isRentable:
          type: boolean
        isSellable:
          type: boolean
        purchasePrice:
          type: number
        purchaseDate:
          type: string
          format: date
        depreciationMethod:
          type: string
        usefulLifeMonths:
          type: integer
        customFields:
          type: object
          additionalProperties: true

    UpdateProductRequest:
      type: object
      properties:
        parentId:
          type: string
          format: uuid
          nullable: true
        categoryId:
          type: string
          format: uuid
          nullable: true
        name:
          type: string
          nullable: true
        sku:
          type: string
          nullable: true
        productType:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        unitPrice:
          type: number
          nullable: true
        priceUnit:
          type: string
          nullable: true
        costPrice:
          type: number
          nullable: true
        trackingType:
          type: string
          nullable: true
        unitOfMeasure:
          type: string
          nullable: true
        reorderPoint:
          type: integer
          nullable: true
        isRentable:
          type: boolean
          nullable: true
        isSellable:
          type: boolean
          nullable: true
        purchasePrice:
          type: number
          nullable: true
        purchaseDate:
          type: string
          format: date
          nullable: true
        depreciationMethod:
          type: string
          nullable: true
        usefulLifeMonths:
          type: integer
          nullable: true
        customFields:
          type: object
          additionalProperties: true
          nullable: true
        isActive:
          type: boolean
          nullable: true
        displayOrder:
          type: integer
          nullable: true

    InventoryItemResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        productId:
          type: string
          format: uuid
        productName:
          type: string
        vendorId:
          type: string
          format: uuid
        serialNumber:
          type: string
        barcode:
          type: string
        status:
          type: string
        condition:
          type: string
        ownership:
          type: string
        location:
          type: string
        notes:
          type: string
        purchasePrice:
          type: number
        purchaseDate:
          type: string
          format: date
        customFields:
          type: object
          additionalProperties: true
        createdAt:
          $ref: "#/components/schemas/Timestamp"
        updatedAt:
          $ref: "#/components/schemas/Timestamp"

    PaginatedInventoryItemResponse:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/InventoryItemResponse"
        page:
          type: integer
        size:
          type: integer
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer

    CreateInventoryItemRequest:
      type: object
      required:
        - productId
      properties:
        productId:
          type: string
          format: uuid
        vendorId:
          type: string
          format: uuid
        serialNumber:
          type: string
        barcode:
          type: string
        status:
          type: string
        condition:
          type: string
        ownership:
          type: string
        location:
          type: string
        notes:
          type: string
        purchasePrice:
          type: number
        purchaseDate:
          type: string
          format: date
        customFields:
          type: object
          additionalProperties: true

    UpdateInventoryItemRequest:
      type: object
      properties:
        vendorId:
          type: string
          format: uuid
          nullable: true
        serialNumber:
          type: string
          nullable: true
        barcode:
          type: string
          nullable: true
        status:
          type: string
          nullable: true
        condition:
          type: string
          nullable: true
        ownership:
          type: string
          nullable: true
        location:
          type: string
          nullable: true
        notes:
          type: string
          nullable: true
        purchasePrice:
          type: number
          nullable: true
        purchaseDate:
          type: string
          format: date
          nullable: true
        customFields:
          type: object
          additionalProperties: true
          nullable: true

    CheckOutRequest:
      type: object
      properties:
        projectId:
          type: string
          format: uuid
        notes:
          type: string

    CheckInRequest:
      type: object
      properties:
        condition:
          type: string
        location:
          type: string
        notes:
          type: string

    TransferItemRequest:
      type: object
      required:
        - location
      properties:
        location:
          type: string
        notes:
          type: string

    StockLevelResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        productId:
          type: string
          format: uuid
        productName:
          type: string
        location:
          type: string
        quantityOnHand:
          type: number
        quantityReserved:
          type: number
        createdAt:
          $ref: "#/components/schemas/Timestamp"
        updatedAt:
          $ref: "#/components/schemas/Timestamp"

    ConsumeStockRequest:
      type: object
      required:
        - quantity
      properties:
        quantity:
          type: number
        projectId:
          type: string
          format: uuid
        notes:
          type: string

    RestockRequest:
      type: object
      required:
        - quantity
      properties:
        quantity:
          type: number
        notes:
          type: string

    TransferStockRequest:
      type: object
      required:
        - toLocation
        - quantity
      properties:
        toLocation:
          type: string
        quantity:
          type: number
        notes:
          type: string

    InventoryTransactionResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        inventoryItemId:
          type: string
          format: uuid
        productId:
          type: string
          format: uuid
        stockLevelId:
          type: string
          format: uuid
        quantity:
          type: number
        projectId:
          type: string
          format: uuid
        transactionType:
          type: string
        performedById:
          type: string
          format: uuid
        notes:
          type: string
        createdAt:
          $ref: "#/components/schemas/Timestamp"

    PaginatedInventoryTransactionResponse:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/InventoryTransactionResponse"
        page:
          type: integer
        size:
          type: integer
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer

    # ========= Resource Schemas =========
    ResourceResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        userId:
          type: string
          format: uuid
        type:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
        phone:
          type: string
        avatarUrl:
          type: string
        locationCity:
          type: string
        locationState:
          type: string
        locationCountry:
          type: string
        defaultDayRate:
          type: number
        defaultHourRate:
          type: number
        currency:
          type: string
        customFields:
          type: object
          additionalProperties: true
        isActive:
          type: boolean
        createdAt:
          $ref: "#/components/schemas/Timestamp"
        updatedAt:
          $ref: "#/components/schemas/Timestamp"

    PaginatedResourceResponse:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/ResourceResponse"
        page:
          type: integer
        size:
          type: integer
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer

    CreateResourceRequest:
      type: object
      required:
        - firstName
        - lastName
      properties:
        userId:
          type: string
          format: uuid
        type:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
        phone:
          type: string
        avatarUrl:
          type: string
        locationCity:
          type: string
        locationState:
          type: string
        locationCountry:
          type: string
        defaultDayRate:
          type: number
        defaultHourRate:
          type: number
        currency:
          type: string
        customFields:
          type: object
          additionalProperties: true

    UpdateResourceRequest:
      type: object
      properties:
        type:
          type: string
          nullable: true
        firstName:
          type: string
          nullable: true
        lastName:
          type: string
          nullable: true
        email:
          type: string
          nullable: true
        phone:
          type: string
          nullable: true
        avatarUrl:
          type: string
          nullable: true
        locationCity:
          type: string
          nullable: true
        locationState:
          type: string
          nullable: true
        locationCountry:
          type: string
          nullable: true
        defaultDayRate:
          type: number
          nullable: true
        defaultHourRate:
          type: number
          nullable: true
        currency:
          type: string
          nullable: true
        customFields:
          type: object
          additionalProperties: true
          nullable: true
        isActive:
          type: boolean
          nullable: true

    ResourceAvailabilityResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        resourceId:
          type: string
          format: uuid
        dateStart:
          type: string
          format: date
        dateEnd:
          type: string
          format: date
        status:
          type: string
        reason:
          type: string
        projectId:
          type: string
          format: uuid
        createdAt:
          $ref: "#/components/schemas/Timestamp"

    CreateResourceAvailabilityRequest:
      type: object
      required:
        - dateStart
        - dateEnd
      properties:
        dateStart:
          type: string
          format: date
        dateEnd:
          type: string
          format: date
        status:
          type: string
        reason:
          type: string
        projectId:
          type: string
          format: uuid

    UpdateResourceAvailabilityRequest:
      type: object
      properties:
        dateStart:
          type: string
          format: date
          nullable: true
        dateEnd:
          type: string
          format: date
          nullable: true
        status:
          type: string
          nullable: true
        reason:
          type: string
          nullable: true
        projectId:
          type: string
          format: uuid
          nullable: true

    ResourcePayoutResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        resourceId:
          type: string
          format: uuid
        resourceName:
          type: string
        projectId:
          type: string
          format: uuid
        description:
          type: string
        amount:
          type: number
        currency:
          type: string
        status:
          type: string
        approvedAt:
          $ref: "#/components/schemas/Timestamp"
        approvedById:
          type: string
          format: uuid
        paymentMethod:
          type: string
        paymentReference:
          type: string
        paidAt:
          $ref: "#/components/schemas/Timestamp"
        periodStart:
          type: string
          format: date
        periodEnd:
          type: string
          format: date
        notes:
          type: string
        createdAt:
          $ref: "#/components/schemas/Timestamp"
        updatedAt:
          $ref: "#/components/schemas/Timestamp"

    PaginatedResourcePayoutResponse:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/ResourcePayoutResponse"
        page:
          type: integer
        size:
          type: integer
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer

    CreateResourcePayoutRequest:
      type: object
      required:
        - resourceId
        - amount
      properties:
        resourceId:
          type: string
          format: uuid
        projectId:
          type: string
          format: uuid
        description:
          type: string
        amount:
          type: number
        currency:
          type: string
        periodStart:
          type: string
          format: date
        periodEnd:
          type: string
          format: date
        notes:
          type: string

    UpdateResourcePayoutRequest:
      type: object
      properties:
        description:
          type: string
          nullable: true
        amount:
          type: number
          nullable: true
        currency:
          type: string
          nullable: true
        status:
          type: string
          nullable: true
        paymentMethod:
          type: string
          nullable: true
        paymentReference:
          type: string
          nullable: true
        periodStart:
          type: string
          format: date
          nullable: true
        periodEnd:
          type: string
          format: date
          nullable: true
        notes:
          type: string
          nullable: true

    MarkPayoutPaidRequest:
      type: object
      properties:
        paymentMethod:
          type: string
        paymentReference:
          type: string

    # ========= Project Schemas =========

    ProjectResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        clientId:
          type: string
          format: uuid
        clientName:
          type: string
        projectNumber:
          type: string
        title:
          type: string
        description:
          type: string
        status:
          type: string
        priority:
          type: string
        venueName:
          type: string
        location:
          type: object
          additionalProperties: true
        onsiteContact:
          type: object
          additionalProperties: true
        totalBillable:
          type: number
        totalCost:
          type: number
        totalProfit:
          type: number
        externalAccountingId:
          type: string
        source:
          type: string
        inboundRequestId:
          type: string
          format: uuid
        customFields:
          type: object
          additionalProperties: true
        createdById:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    ProjectDetailResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        clientId:
          type: string
          format: uuid
        clientName:
          type: string
        projectNumber:
          type: string
        title:
          type: string
        description:
          type: string
        status:
          type: string
        priority:
          type: string
        venueName:
          type: string
        location:
          type: object
          additionalProperties: true
        onsiteContact:
          type: object
          additionalProperties: true
        totalBillable:
          type: number
        totalCost:
          type: number
        totalProfit:
          type: number
        externalAccountingId:
          type: string
        source:
          type: string
        inboundRequestId:
          type: string
          format: uuid
        customFields:
          type: object
          additionalProperties: true
        createdById:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        dateRanges:
          type: array
          items:
            $ref: "#/components/schemas/ProjectDateRangeResponse"
        resources:
          type: array
          items:
            $ref: "#/components/schemas/ProjectResourceResponse"
        products:
          type: array
          items:
            $ref: "#/components/schemas/ProjectProductResponse"

    PaginatedProjectResponse:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/ProjectResponse"
        page:
          type: integer
        size:
          type: integer
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer

    CreateProjectRequest:
      type: object
      required:
        - title
      properties:
        clientId:
          type: string
          format: uuid
        title:
          type: string
        description:
          type: string
        priority:
          type: string
        venueName:
          type: string
        location:
          type: object
          additionalProperties: true
        onsiteContact:
          type: object
          additionalProperties: true
        externalAccountingId:
          type: string
        source:
          type: string
        customFields:
          type: object
          additionalProperties: true

    UpdateProjectRequest:
      type: object
      properties:
        clientId:
          type: string
          format: uuid
          nullable: true
        title:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        priority:
          type: string
          nullable: true
        venueName:
          type: string
          nullable: true
        location:
          type: object
          additionalProperties: true
          nullable: true
        onsiteContact:
          type: object
          additionalProperties: true
          nullable: true
        externalAccountingId:
          type: string
          nullable: true
        source:
          type: string
          nullable: true
        customFields:
          type: object
          additionalProperties: true
          nullable: true

    ProjectStatusTransition:
      type: object
      required:
        - status
      properties:
        status:
          type: string

    ProjectDateRangeResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        projectId:
          type: string
          format: uuid
        dateStart:
          type: string
          format: date
        dateEnd:
          type: string
          format: date
        label:
          type: string
        rateMultiplier:
          type: number
        notes:
          type: string
        displayOrder:
          type: integer
        createdAt:
          type: string
          format: date-time

    CreateProjectDateRangeRequest:
      type: object
      required:
        - dateStart
        - dateEnd
      properties:
        dateStart:
          type: string
          format: date
        dateEnd:
          type: string
          format: date
        label:
          type: string
        rateMultiplier:
          type: number
        notes:
          type: string
        displayOrder:
          type: integer

    UpdateProjectDateRangeRequest:
      type: object
      properties:
        dateStart:
          type: string
          format: date
          nullable: true
        dateEnd:
          type: string
          format: date
          nullable: true
        label:
          type: string
          nullable: true
        rateMultiplier:
          type: number
          nullable: true
        notes:
          type: string
          nullable: true
        displayOrder:
          type: integer
          nullable: true

    ProjectResourceResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        projectId:
          type: string
          format: uuid
        resourceId:
          type: string
          format: uuid
        resourceName:
          type: string
        role:
          type: string
        billRate:
          type: number
        payRate:
          type: number
        rateUnit:
          type: string
        perDiem:
          type: number
        dateRangeIds:
          type: array
          items:
            type: string
            format: uuid
        status:
          type: string
        confirmedAt:
          type: string
          format: date-time
        notes:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    CreateProjectResourceRequest:
      type: object
      required:
        - resourceId
      properties:
        resourceId:
          type: string
          format: uuid
        role:
          type: string
        billRate:
          type: number
        payRate:
          type: number
        rateUnit:
          type: string
        perDiem:
          type: number
        dateRangeIds:
          type: array
          items:
            type: string
            format: uuid
        notes:
          type: string

    UpdateProjectResourceRequest:
      type: object
      properties:
        role:
          type: string
          nullable: true
        billRate:
          type: number
          nullable: true
        payRate:
          type: number
          nullable: true
        rateUnit:
          type: string
          nullable: true
        perDiem:
          type: number
          nullable: true
        dateRangeIds:
          type: array
          items:
            type: string
            format: uuid
          nullable: true
        notes:
          type: string
          nullable: true

    ProjectProductResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        projectId:
          type: string
          format: uuid
        productId:
          type: string
          format: uuid
        productName:
          type: string
        inventoryItemId:
          type: string
          format: uuid
        vendorId:
          type: string
          format: uuid
        vendorName:
          type: string
        quantity:
          type: number
        billRate:
          type: number
        costRate:
          type: number
        rateUnit:
          type: string
        status:
          type: string
        checkedOutAt:
          type: string
          format: date-time
        returnedAt:
          type: string
          format: date-time
        notes:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    CreateProjectProductRequest:
      type: object
      required:
        - productId
      properties:
        productId:
          type: string
          format: uuid
        inventoryItemId:
          type: string
          format: uuid
        vendorId:
          type: string
          format: uuid
        quantity:
          type: number
        billRate:
          type: number
        costRate:
          type: number
        rateUnit:
          type: string
        notes:
          type: string

    UpdateProjectProductRequest:
      type: object
      properties:
        vendorId:
          type: string
          format: uuid
          nullable: true
        quantity:
          type: number
          nullable: true
        billRate:
          type: number
          nullable: true
        costRate:
          type: number
          nullable: true
        rateUnit:
          type: string
          nullable: true
        notes:
          type: string
          nullable: true

    ProjectCalendarEntry:
      type: object
      properties:
        projectId:
          type: string
          format: uuid
        projectNumber:
          type: string
        title:
          type: string
        status:
          type: string
        clientName:
          type: string
        dateStart:
          type: string
          format: date
        dateEnd:
          type: string
          format: date
        label:
          type: string

    # ========= Inbound Request Schemas =========

    InboundRequestResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        submitterName:
          type: string
        submitterEmail:
          type: string
        submitterPhone:
          type: string
        submitterCompany:
          type: string
        clientId:
          type: string
          format: uuid
        templateId:
          type: string
          format: uuid
        formData:
          type: object
          additionalProperties: true
        status:
          type: string
        reviewedById:
          type: string
          format: uuid
        reviewedAt:
          type: string
          format: date-time
        denialReason:
          type: string
        projectId:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    PaginatedInboundRequestResponse:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/InboundRequestResponse"
        page:
          type: integer
        size:
          type: integer
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer

    CreateInboundRequestRequest:
      type: object
      properties:
        submitterName:
          type: string
        submitterEmail:
          type: string
        submitterPhone:
          type: string
        submitterCompany:
          type: string
        clientId:
          type: string
          format: uuid
        templateId:
          type: string
          format: uuid
        formData:
          type: object
          additionalProperties: true

    UpdateInboundRequestRequest:
      type: object
      properties:
        submitterName:
          type: string
          nullable: true
        submitterEmail:
          type: string
          nullable: true
        submitterPhone:
          type: string
          nullable: true
        submitterCompany:
          type: string
          nullable: true
        clientId:
          type: string
          format: uuid
          nullable: true
        formData:
          type: object
          additionalProperties: true
          nullable: true

    ReviewInboundRequestRequest:
      type: object
      required:
        - decision
      properties:
        decision:
          type: string
          description: "approved or denied"
        denialReason:
          type: string

    # ========= Quote Schemas =========

    QuoteResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        projectId:
          type: string
          format: uuid
        clientId:
          type: string
          format: uuid
        clientName:
          type: string
        quoteNumber:
          type: string
        version:
          type: integer
        title:
          type: string
        status:
          type: string
        issuedDate:
          type: string
          format: date
        validUntil:
          type: string
          format: date
        approvedAt:
          type: string
          format: date-time
        subtotal:
          type: number
        discountAmount:
          type: number
        taxAmount:
          type: number
        total:
          type: number
        currency:
          type: string
        notes:
          type: string
        internalNotes:
          type: string
        terms:
          type: string
        externalAccountingId:
          type: string
        approvedByName:
          type: string
        approvedByEmail:
          type: string
        customFields:
          type: object
          additionalProperties: true
        createdById:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    QuoteDetailResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        projectId:
          type: string
          format: uuid
        clientId:
          type: string
          format: uuid
        clientName:
          type: string
        quoteNumber:
          type: string
        version:
          type: integer
        title:
          type: string
        status:
          type: string
        issuedDate:
          type: string
          format: date
        validUntil:
          type: string
          format: date
        approvedAt:
          type: string
          format: date-time
        subtotal:
          type: number
        discountAmount:
          type: number
        taxAmount:
          type: number
        total:
          type: number
        currency:
          type: string
        notes:
          type: string
        internalNotes:
          type: string
        terms:
          type: string
        externalAccountingId:
          type: string
        approvedByName:
          type: string
        approvedByEmail:
          type: string
        customFields:
          type: object
          additionalProperties: true
        createdById:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        lineItems:
          type: array
          items:
            $ref: "#/components/schemas/QuoteLineItemResponse"

    PaginatedQuoteResponse:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/QuoteResponse"
        page:
          type: integer
        size:
          type: integer
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer

    CreateQuoteRequest:
      type: object
      required:
        - clientId
      properties:
        clientId:
          type: string
          format: uuid
        projectId:
          type: string
          format: uuid
        title:
          type: string
        issuedDate:
          type: string
          format: date
        validUntil:
          type: string
          format: date
        currency:
          type: string
        notes:
          type: string
        internalNotes:
          type: string
        terms:
          type: string
        customFields:
          type: object
          additionalProperties: true

    UpdateQuoteRequest:
      type: object
      properties:
        title:
          type: string
          nullable: true
        status:
          type: string
          nullable: true
        issuedDate:
          type: string
          format: date
          nullable: true
        validUntil:
          type: string
          format: date
          nullable: true
        currency:
          type: string
          nullable: true
        notes:
          type: string
          nullable: true
        internalNotes:
          type: string
          nullable: true
        terms:
          type: string
          nullable: true
        externalAccountingId:
          type: string
          nullable: true
        customFields:
          type: object
          additionalProperties: true
          nullable: true

    QuoteLineItemResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        quoteId:
          type: string
          format: uuid
        productId:
          type: string
          format: uuid
        resourceId:
          type: string
          format: uuid
        categoryId:
          type: string
          format: uuid
        description:
          type: string
        dateStart:
          type: string
          format: date
        dateEnd:
          type: string
          format: date
        quantity:
          type: number
        unitPrice:
          type: number
        unit:
          type: string
        discountPercent:
          type: number
        discountAmount:
          type: number
        taxRate:
          type: number
        lineTotal:
          type: number
        costPerUnit:
          type: number
        costTotal:
          type: number
        section:
          type: string
        displayOrder:
          type: integer
        isVisible:
          type: boolean
        notes:
          type: string
        createdAt:
          type: string
          format: date-time

    CreateQuoteLineItemRequest:
      type: object
      required:
        - description
      properties:
        productId:
          type: string
          format: uuid
        resourceId:
          type: string
          format: uuid
        categoryId:
          type: string
          format: uuid
        description:
          type: string
        dateStart:
          type: string
          format: date
        dateEnd:
          type: string
          format: date
        quantity:
          type: number
        unitPrice:
          type: number
        unit:
          type: string
        discountPercent:
          type: number
        discountAmount:
          type: number
        taxRate:
          type: number
        costPerUnit:
          type: number
        section:
          type: string
        displayOrder:
          type: integer
        isVisible:
          type: boolean
        notes:
          type: string

    UpdateQuoteLineItemRequest:
      type: object
      properties:
        description:
          type: string
          nullable: true
        dateStart:
          type: string
          format: date
          nullable: true
        dateEnd:
          type: string
          format: date
          nullable: true
        quantity:
          type: number
          nullable: true
        unitPrice:
          type: number
          nullable: true
        unit:
          type: string
          nullable: true
        discountPercent:
          type: number
          nullable: true
        discountAmount:
          type: number
          nullable: true
        taxRate:
          type: number
          nullable: true
        costPerUnit:
          type: number
          nullable: true
        section:
          type: string
          nullable: true
        displayOrder:
          type: integer
          nullable: true
        isVisible:
          type: boolean
          nullable: true
        notes:
          type: string
          nullable: true

    QuoteApprovalRequest:
      type: object
      properties:
        approvedByName:
          type: string
        approvedByEmail:
          type: string
        signatureUrl:
          type: string
